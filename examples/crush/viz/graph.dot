digraph G {
    rankdir=BT;
    node [shape=box, style=filled];
    edge [arrowsize=0.7];

    // Layer 0: Foundations
    subgraph cluster_0 {
        label="Foundations";
        style=filled;
        fillcolor="#c8e6c9";
        n_import_fmt [label="import:fmt\nA:94 E:0", fillcolor="#ffffff"];
        n_import_strings [label="import:strings\nA:85 E:0", fillcolor="#ffffff"];
        n_import_context [label="import:context\nA:80 E:0", fillcolor="#ffffff"];
        n_import_time [label="import:time\nA:53 E:0", fillcolor="#ffffff"];
        n_import_os [label="import:os\nA:53 E:0", fillcolor="#ffffff"];
        n_import_charm_land_lipgloss_v2 [label="v2\nA:49 E:0", fillcolor="#ffffff"];
        n_config_Get [label="config.Get\nA:44 E:0", fillcolor="#ffffff"];
        n_import_charm_land_bubbletea_v2 [label="v2\nA:43 E:0", fillcolor="#ffffff"];
        n_import_github_com_charmbracelet_crush_internal_tui_styles [label="styles\nA:39 E:0", fillcolor="#f5f5f5"];
        n_import_path_filepath [label="filepath\nA:38 E:0", fillcolor="#f2f2f2"];
        n_import_log_slog [label="slog\nA:37 E:0", fillcolor="#efefef"];
        n_import_charm_land_bubbles_v2_key [label="key\nA:34 E:0", fillcolor="#e6e6e6"];
        n_import_github_com_charmbracelet_crush_internal_config [label="config\nA:34 E:0", fillcolor="#e6e6e6"];
        n_import_github_com_charmbracelet_crush_internal_tui_util [label="util\nA:33 E:0", fillcolor="#e3e3e3"];
        n_import_charm_land_fantasy [label="fantasy\nA:27 E:0", fillcolor="#d1d1d1"];
    }

    // Layer 1: Core
    subgraph cluster_1 {
        label="Core";
        style=filled;
        fillcolor="#ffe0b2";
        n_internal_tui_components_chat_messages_renderer_go [label="renderer.go\nA:0 E:93", fillcolor="#ffffff"];
        n_internal_tui_exp_list_list_go [label="list.go\nA:0 E:82", fillcolor="#ffffff"];
        n_internal_config_config_go [label="config.go\nA:0 E:79", fillcolor="#ffffff"];
        n_internal_tui_page_chat_chat_go [label="chat.go\nA:0 E:70", fillcolor="#ffffff"];
        n_internal_agent_coordinator_go [label="coordinator.go\nA:0 E:70", fillcolor="#ffffff"];
        n_internal_tui_components_chat_messages_tool_go [label="tool.go\nA:0 E:69", fillcolor="#ffffff"];
        n_internal_tui_components_chat_splash_splash_go [label="splash.go\nA:0 E:67", fillcolor="#ffffff"];
        n_internal_tui_components_chat_editor_editor_go [label="editor.go\nA:0 E:63", fillcolor="#ffffff"];
        n_internal_message_content_go [label="content.go\nA:0 E:62", fillcolor="#ffffff"];
        n_internal_tui_components_chat_chat_go [label="chat.go\nA:0 E:61", fillcolor="#ffffff"];
        n_internal_tui_components_chat_sidebar_sidebar_go [label="sidebar.go\nA:0 E:57", fillcolor="#ffffff"];
        n_internal_agent_agent_go [label="agent.go\nA:0 E:57", fillcolor="#ffffff"];
        n_internal_tui_components_dialogs_commands_commands_go [label="commands.go\nA:0 E:56", fillcolor="#ffffff"];
        n_internal_tui_components_chat_messages_messages_go [label="messages.go\nA:0 E:53", fillcolor="#ffffff"];
        n_internal_tui_components_dialogs_permissions_permissions_go [label="permissions.go\nA:0 E:53", fillcolor="#ffffff"];
    }

    // Layer 2: Support
    subgraph cluster_2 {
        label="Support";
        style=filled;
        fillcolor="#bbdefb";
        n_internal_tui_exp_list_filterable_go [label="filterable.go\nA:0 E:40", fillcolor="#f8f8f8"];
        n_internal_uicmd_uicmd_go [label="uicmd.go\nA:0 E:39", fillcolor="#f5f5f5"];
        n_internal_tui_components_dialogs_models_models_go [label="models.go\nA:0 E:39", fillcolor="#f5f5f5"];
        n_internal_cmd_root_go [label="root.go\nA:0 E:36", fillcolor="#ececec"];
        n_internal_tui_styles_theme_go [label="theme.go\nA:0 E:35", fillcolor="#e9e9e9"];
        n_internal_tui_components_dialogs_reasoning_reasoning_go [label="reasoning.go\nA:0 E:33", fillcolor="#e3e3e3"];
        n_internal_agent_tools_grep_go [label="grep.go\nA:0 E:33", fillcolor="#e3e3e3"];
        n_internal_tui_components_dialogs_filepicker_filepicker_go [label="filepicker.go\nA:0 E:32", fillcolor="#e0e0e0"];
        n_internal_agent_prompt_prompt_go [label="prompt.go\nA:0 E:32", fillcolor="#e0e0e0"];
        n_internal_tui_components_completions_completions_go [label="completions.go\nA:0 E:30", fillcolor="#dadada"];
        n_internal_session_session_go [label="session.go\nA:0 E:30", fillcolor="#dadada"];
        n_internal_tui_components_dialogs_claude_oauth_go [label="oauth.go\nA:0 E:29", fillcolor="#d7d7d7"];
        n_internal_agent_tools_view_go [label="view.go\nA:0 E:29", fillcolor="#d7d7d7"];
        n_internal_tui_components_anim_anim_go [label="anim.go\nA:0 E:28", fillcolor="#d4d4d4"];
        n_internal_config_provider_go [label="provider.go\nA:0 E:28", fillcolor="#d4d4d4"];
    }

    // Layer 3: Applications
    subgraph cluster_3 {
        label="Applications";
        style=filled;
        fillcolor="#f8bbd0";
        n_main_go [label="main.go\nA:0 E:7", fillcolor="#959595"];
    }

    // Edges
    n_internal_db_db_go -> n_db__Queries_exec [penwidth=0.7, color="#cc0000"];
    n_internal_tui_components_chat_sidebar_sidebar_go -> n_sidebar__sidebarCmp_SetCompactMode [penwidth=0.7, color="#cc0000"];
    n_internal_tui_exp_diffview_diffview_go -> n_diffview__DiffView_replaceTabs [penwidth=0.7, color="#cc0000"];
    n_internal_config_hyper_go -> n_import_context [penwidth=0.7, color="#cc0000"];
    n_editor_editorCmp -> n_message_Attachment [penwidth=0.7, color="#cc0000"];
    n_editor__editorCmp_startCompletions -> n_fsext_ListDirectory [penwidth=0.7, color="#cc0000"];
    n_internal_agent_coordinator_go -> n_import_slices [penwidth=0.7, color="#cc0000"];
    n_internal_tui_components_dialogs_models_apikey_go -> n_import_charm_land_bubbles_v2_textinput [penwidth=0.7, color="#cc0000"];
    n_internal_tui_components_dialogs_models_list_go -> n_import_cmp [penwidth=0.7, color="#cc0000"];
    n_internal_update_update_go -> n_import_net_http [penwidth=0.7, color="#cc0000"];
    n_internal_agent_tools_ls_go -> n_tools_printTree [penwidth=0.7, color="#cc0000"];
    n_internal_tui_exp_list_items_go -> n_list__itemSectionModel_Init [penwidth=0.7, color="#cc0000"];
    n_internal_agent_prompt_prompt_go -> n_import_os [penwidth=0.7, color="#cc0000"];
    n_internal_tui_tui_go -> n_import_context [penwidth=0.7, color="#cc0000"];
    n_internal_agent_tools_mcp_tools_go -> n_mcp_ToolResult [penwidth=0.7, color="#cc0000"];
    n_internal_event_all_go -> n_event_PromptResponded [penwidth=0.7, color="#cc0000"];
    n_cmd_setupApp -> n_app_New [penwidth=0.7, color="#666666"];
    n_internal_message_content_go -> n_message_ReasoningContent_isPart [penwidth=0.7, color="#cc0000"];
    n_internal_message_message_go -> n_message__service_List [penwidth=0.7, color="#cc0000"];
    n_internal_tui_components_chat_messages_messages_go -> n_messages__assistantSectionModel_GetSize [penwidth=0.7, color="#cc0000"];
    n_uicmd_LoadMCPPrompts -> n_mcp_Prompts [penwidth=0.7, color="#cc0000"];
    n_internal_tui_components_dialogs_claude_oauth_go -> n_claude_OAuth2 [penwidth=0.7, color="#666666"];
    n_internal_tui_components_dialogs_permissions_permissions_go -> n_permissions__permissionDialogCmp_selectCurrentOption [penwidth=0.7, color="#cc0000"];
    n_internal_config_config_go -> n_import_context [penwidth=0.7, color="#cc0000"];
    n_internal_tui_components_dialogs_models_list_go -> n_import_strings [penwidth=0.7, color="#cc0000"];
    n_internal_tui_exp_list_filterable_go -> n_import_charm_land_bubbles_v2_key [penwidth=0.7, color="#cc0000"];
    n_internal_tui_components_dialogs_commands_commands_go -> n_commands_QuitMsg [penwidth=0.7, color="#cc0000"];
    n_internal_fsext_fileutil_go -> n_import_fmt [penwidth=0.7, color="#cc0000"];
    n_internal_agent_tools_download_go -> n_tools_NewDownloadTool [penwidth=0.7, color="#cc0000"];
    n_internal_tui_components_completions_keys_go -> n_completions_KeyMap_ShortHelp [penwidth=0.7, color="#cc0000"];
    n_internal_agent_tools_fetch_helpers_go -> n_import_github_com_JohannesKaufmann_html_to_markdown [penwidth=0.7, color="#cc0000"];
    n_internal_tui_tui_go -> n_import_github_com_charmbracelet_crush_internal_tui_components_core_layout [penwidth=0.7, color="#cc0000"];
    n_internal_lsp_handlers_go -> n_lsp_HandleDiagnostics [penwidth=0.7, color="#cc0000"];
    n_internal_tui_components_dialogs_copilot_device_flow_go -> n_copilot__DeviceFlow_CopyCodeAndOpenURL [penwidth=0.7, color="#cc0000"];
    n_internal_oauth_copilot_oauth_go -> n_import_fmt [penwidth=0.7, color="#cc0000"];
    n_internal_tui_components_chat_splash_splash_go -> n_splash_splashCmp [penwidth=0.7, color="#cc0000"];
    n_internal_tui_components_dialogs_dialogs_go -> n_dialogs_dialogCmp_ActiveDialogID [penwidth=0.7, color="#cc0000"];
    n_internal_agent_tools_mcp_prompts_go -> n_import_iter [penwidth=0.7, color="#cc0000"];
    n_internal_config_catwalk_go -> n_import_sync [penwidth=0.7, color="#cc0000"];
    n_internal_tui_components_dialogs_claude_oauth_go -> n_import_github_com_pkg_browser [penwidth=0.7, color="#cc0000"];
    n_models_NewModelDialogCmp -> n_claude_NewAuthMethodChooser [penwidth=0.7, color="#cc0000"];
    n_internal_agent_agent_go -> n_agent_SessionAgentOptions [penwidth=0.7, color="#cc0000"];
    n_internal_version_version_go -> n_version_init [penwidth=0.7, color="#cc0000"];
    n_internal_tui_components_dialogs_claude_method_go -> n_import_github_com_charmbracelet_crush_internal_tui_util [penwidth=0.7, color="#cc0000"];
    n_internal_tui_styles_theme_go -> n_import_charm_land_glamour_v2_ansi [penwidth=0.7, color="#cc0000"];
    n_messages_NewMessageCmp -> n_anim_New [penwidth=0.7, color="#666666"];
    n_internal_app_app_go -> n_import_charm_land_lipgloss_v2 [penwidth=0.7, color="#cc0000"];
    n_internal_cmd_logs_go -> n_import_github_com_spf13_cobra [penwidth=0.7, color="#cc0000"];
    n_internal_tui_components_chat_header_header_go -> n_import_github_com_charmbracelet_crush_internal_tui_util [penwidth=0.7, color="#cc0000"];
    n_internal_tui_components_dialogs_claude_oauth_go -> n_import_charm_land_bubbletea_v2 [penwidth=0.7, color="#cc0000"];
    n_internal_tui_exp_diffview_util_go -> n_import_fmt [penwidth=0.7, color="#cc0000"];
    n_internal_message_message_go -> n_message_partType [penwidth=0.7, color="#cc0000"];
    n_internal_tui_exp_list_filterable_go -> n_list___SetItems [penwidth=0.7, color="#cc0000"];
    n_internal_agent_tools_fetch_go -> n_import_net_http [penwidth=0.7, color="#cc0000"];
    n_internal_app_lsp_go -> n_import_time [penwidth=0.7, color="#cc0000"];
    n_internal_agent_tools_mcp_init_go -> n_mcp_GetStates [penwidth=0.7, color="#cc0000"];
    n_internal_env_env_go -> n_env_Env [penwidth=0.7, color="#cc0000"];
    n_internal_tui_components_dialogs_models_models_go -> n_models__modelDialogCmp_listWidth [penwidth=0.7, color="#cc0000"];
    n_internal_session_session_go -> n_session_service [penwidth=0.7, color="#666666"];
    n_internal_shell_background_go -> n_import_github_com_charmbracelet_crush_internal_csync [penwidth=0.7, color="#cc0000"];
    n_internal_tui_exp_diffview_chroma_go -> n_import_image_color [penwidth=0.7, color="#cc0000"];
    n_internal_agent_tools_file_go -> n_tools_recordFileWrite [penwidth=0.7, color="#cc0000"];
    n_internal_tui_components_dialogs_reasoning_reasoning_go -> n_reasoning_ReasoningDialogKeyMap_ShortHelp [penwidth=0.7, color="#cc0000"];
    n_internal_fsext_fileutil_go -> n_fsext_ToWindowsLineEndings [penwidth=0.7, color="#cc0000"];
    n_internal_tui_components_chat_splash_splash_go -> n_splash__splashCmp_isProviderConfigured [penwidth=0.7, color="#cc0000"];
    n_internal_tui_components_chat_messages_tool_go -> n_import_github_com_charmbracelet_crush_internal_message [penwidth=0.7, color="#cc0000"];
    n_internal_tui_components_dialogs_models_apikey_go -> n_import_github_com_charmbracelet_crush_internal_tui_util [penwidth=0.7, color="#cc0000"];
    n_internal_fsext_ls_go -> n_fsext_NewDirectoryLister [penwidth=0.7, color="#cc0000"];
    n_internal_event_identifier_go -> n_import_encoding_hex [penwidth=0.7, color="#cc0000"];
    n_internal_tui_exp_diffview_chroma_go -> n_import_strings [penwidth=0.7, color="#cc0000"];
    n_internal_config_load_go -> n_import_os_exec [penwidth=0.7, color="#cc0000"];
    n_internal_agent_tools_bash_go -> n_tools_bashDescriptionData [penwidth=0.7, color="#cc0000"];
    n_internal_tui_components_chat_messages_tool_go -> n_messages__toolCallCmp_GetSize [penwidth=0.7, color="#cc0000"];
    n_internal_cmd_schema_go -> n_import_github_com_spf13_cobra [penwidth=0.7, color="#cc0000"];
    n_internal_config_config_go -> n_import_path_filepath [penwidth=0.7, color="#cc0000"];
    n_internal_oauth_hyper_device_go -> n_import_time [penwidth=0.7, color="#cc0000"];
    n_internal_event_event_go -> n_event_GetID [penwidth=0.7, color="#cc0000"];
    n_internal_tui_components_anim_anim_go -> n_anim_makeGradientRamp [penwidth=0.7, color="#cc0000"];
    n_internal_tui_components_chat_editor_editor_go -> n_editor_editorCmp [penwidth=0.7, color="#cc0000"];
    n_internal_agent_tools_search_go -> n_import_fmt [penwidth=0.7, color="#cc0000"];
    n_internal_lsp_client_go -> n_import_github_com_charmbracelet_x_powernap_pkg_lsp_protocol [penwidth=0.7, color="#cc0000"];
    n_internal_tui_components_dialogs_commands_arguments_go -> n_commands__commandArgumentsDialogCmp_Position [penwidth=0.7, color="#cc0000"];
    n_internal_agent_tools_grep_go -> n_import_regexp [penwidth=0.7, color="#cc0000"];
    n_internal_cmd_login_go -> n_import_fmt [penwidth=0.7, color="#cc0000"];
    n_internal_session_session_go -> n_session__service_IsAgentToolSession [penwidth=0.7, color="#cc0000"];
    n_internal_agent_agent_go -> n_import_strings [penwidth=0.7, color="#cc0000"];
    n_internal_shell_coreutils_go -> n_import_os [penwidth=0.7, color="#cc0000"];
    n_internal_tui_tui_go -> n_import_github_com_charmbracelet_crush_internal_tui_util [penwidth=0.7, color="#cc0000"];
    n_internal_tui_exp_diffview_diffview_go -> n_diffview__DiffView_Before [penwidth=0.7, color="#cc0000"];
    n_internal_ansiext_ansi_go -> n_import_strings [penwidth=0.7, color="#cc0000"];
    n_internal_cmd_dirs_go -> n_import_github_com_charmbracelet_crush_internal_config [penwidth=0.7, color="#cc0000"];
    n_permissions__permissionDialogCmp_render -> n_core_Title [penwidth=0.7, color="#cc0000"];
    n_internal_oauth_hyper_device_go -> n_hyper_ExchangeToken [penwidth=0.7, color="#cc0000"];
    n_internal_tui_components_dialogs_claude_oauth_go -> n_claude__OAuth2_validateCode [penwidth=0.7, color="#666666"];
    n_internal_tui_exp_list_list_go -> n_list_New [penwidth=0.7, color="#cc0000"];
    n_internal_agent_agent_go -> n_agent__sessionAgent_SetModels [penwidth=0.7, color="#cc0000"];
    n_internal_fsext_fileutil_go -> n_fsext_DirTrim [penwidth=0.7, color="#cc0000"];
    n_internal_agent_tools_bash_go -> n_import_bytes [penwidth=0.7, color="#cc0000"];
    n_internal_tui_components_dialogs_sessions_sessions_go -> n_sessions__sessionDialogCmp_View [penwidth=0.7, color="#666666"];
    n_internal_app_app_go -> n_import_time [penwidth=0.7, color="#cc0000"];
}
